# バックエンドテスト戦略

このドキュメントでは、Chordifyプロジェクトにおけるテスト戦略と実施ルールについて説明します。

## 目次

- [全般](#全般)
- [テストの種類](#テストの種類)
- [テスト実施ルール](#テスト実施ルール)
- [命名規則](#命名規則)
- [モックとスタブ](#モックとスタブ)
- [テストデータ](#テストデータ)
- [ドキュメンテーション](#ドキュメンテーション)

### 全般
- テストフレームワークは`pytest`および`pytest-django`を使用します。
- ファクトリーライブラリとして`factory-boy`を使用します。

### テストの種類
- **単体テスト**：各関数やクラスが意図通りに動作しているかを確認します。
- **統合テスト**：複数のコンポーネントが協調して期待通り動作するかを確認します。
- **E2Eテスト（エンドツーエンドテスト）**：シナリオに基づき、実際のユーザーの動作を模倣したテストを行います。

### テスト実施ルール
- コードベースの変更時は、必ずテストを追加または更新します。
- CI/CDパイプラインで全てのテストを自動実行します。
- カバレッジは最低でも80%以上を目指します。

### 命名規則
- テスト関数名は`test_<機能名>_<条件>_<期待結果>`の形式を使用します。
- テストクラス名は`Test`プレフィックスを付け、テスト対象クラスの名前を後に続けます。

### モックとスタブ
- 外部サービスや複雑な依存関係は、モックまたはスタブを積極的に使用します。
- モックライブラリとしてPython標準の`unittest.mock`を使用します。

### テストデータ
- テストデータの生成は`factory-boy`で一貫して行います。
- テストデータは各テストケースで独立して生成・削除されます。

### ドキュメンテーション
- テストコードにもドキュメント文字列を記載し、テストの目的を明確にします。
