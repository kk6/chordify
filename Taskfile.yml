version: "3"

tasks:
  default:
    cmds:
      - task --list
    silent: true

  compile-lock:
    desc: "ğŸ” uv.lock ã‚’ç”Ÿæˆ"
    dir: backend
    cmds:
      - uv pip compile pyproject.toml

  install-deps:
    desc: "ğŸ“¦ uv.lock ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«"
    dir: backend
    cmds:
      - uv sync

  lint:
    desc: "ğŸ§¹ ruff ã§ã‚³ãƒ¼ãƒ‰æ•´å½¢ãƒã‚§ãƒƒã‚¯"
    dir: backend
    cmds:
      - ruff .

  typecheck:
    desc: "ğŸ” mypy ã§å‹ãƒã‚§ãƒƒã‚¯"
    dir: backend
    cmds:
      - mypy .

  test:
    desc: "ğŸ§ª pytest ã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ"
    dir: backend
    cmds:
      - pytest

  dev-up:
    desc: "ğŸ³ Dockerã‚³ãƒ³ãƒ†ãƒŠã‚’ãƒ“ãƒ«ãƒ‰ & èµ·å‹•"
    cmds:
      - docker compose build
      - docker compose up

  dev-down:
    desc: "ğŸ§¹ Dockerã‚³ãƒ³ãƒ†ãƒŠã‚’åœæ­¢ & å‰Šé™¤"
    cmds:
      - docker compose down

  reload:
    desc: "ğŸ”„ backend ã‚µãƒ¼ãƒ“ã‚¹ã®ã¿å†èµ·å‹•"
    cmds:
      - docker compose restart backend
